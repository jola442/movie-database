doctype html
head
  title Movie Database
  link(rel='stylesheet' href='/css/person.css')
  link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
header
  include ../partials/navbar.pug


.infoPanel
  #pfp
    img(src='/images/blankpfp.png')
    span#name #{person.name}
    #role
    if person.actor && person.director && person.writer
        p Writer, Actor, Director
    else if person.actor && person.director
        p Actor, Director
    else if person.actor && person.writer
        p Actor, Writer
    else if person.writer && person.director
        p Writer, Director
    else if person.actor
        p Actor
    else if person.writer
        p Writer
    else if person.director
        p Director
  br
  .profileItems
    .profileItem
      .icon
        i.fa.fa-film
      .label
        | Movies
      #movies.value #{person.movies.length}
    .profileItem
      .icon
        i.fa.fa-user-circle
      .label
        | Worked with
      #workedwith.value #{person.collaborators.size}

  if username  
    -var following = user.peopleFollowing.indexOf(person.name) > -1
    //- -console.log("PERSON PUG:", user)
    if following
        #unfollow.button
            input(type='button' value='Unfollow', onclick = "unfollow()")
    else
        #follow.button
            input(type='button' value='Follow' onclick = "follow()")

.mainPane
    h2 Movies
    each movie in person.movies
        a(href="/movies/"+movie.title)=movie.title 
        br
    h2 Most Frequent Collaborators
    each coworker in mostFrequentCollaborators
        a(href="/people/"+coworker.name)=coworker.name
        if(coworker.count > 1)  
          span=" ("+ coworker.count + " times)"
        else
          span= " ("+ coworker.count + " time)"
        br
script(src="/clientjs/person.js")

